@using Booking_Backend.Repository.Common;
@using Booking_Backend.Repository.Paging
@using Booking_Backend.Repository.Paging.ViewModel
@using Booking_Backend.Repository.Users.ViewModel
@using Booking_Frontend.AdminApp.Controllers
@model APIResult_Success<PageResult<UserViewModel>>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers


@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="card mb-4" style="overflow-x: scroll; ">
    <div class="card-body">
        <h4>Danh sách tất cả người dùng: @Model.ResultOject.TotalRecord</h4>
        <table class="table table-hover table-bordered" style="width: 100%" id="">
            <thead>
                <tr>
                    <th>
                        STT
                    </th>
                    <th>
                        Id
                    </th>
                    <th>
                        UserName
                    </th>
                    <th>
                        Avatar
                    </th>
                    <th>
                        Email
                    </th>
                    <th>
                        PhoneNumber
                    </th>
                    <th>
                        FirstName
                    </th>
                    <th>
                        LastName
                    </th>
                    <th>
                        DisplayName
                    </th>
                    <th>
                        Birthday
                    </th>
                    <th>
                        Nation
                    </th>
                    <th>
                        Gender
                    </th>
                    <th>
                        Address
                    </th>
                    <th>
                        Dasboard
                    </th>
                    <th>
                        CreatedAt
                    </th>
                    <th>
                        Status
                    </th> 
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th>
                        STT
                    </th>
                    <th>
                        Id
                    </th>
                    <th>
                        UserName
                    </th>
                    <th>
                        Avatar
                    </th>
                    <th>
                        Email
                    </th>
                    <th>
                        PhoneNumber
                    </th>
                    <th>
                        FirstName
                    </th>
                    <th>
                        LastName
                    </th>
                    <th>
                        DisplayName
                    </th>
                    <th>
                        Birthday
                    </th>
                    <th>
                        Nation
                    </th>
                    <th>
                        Gender
                    </th>
                    <th>
                        Address
                    </th>
                    <th>
                        Dasboard
                    </th>
                    <th>
                        CreatedAt
                    </th>
                    <th>
                        Status
                    </th>
                </tr>
            </tfoot>
            <tbody>
                @{
                    int count = 0;
                    foreach (var item in Model.ResultOject.Items)
                    {
                        count += 1;
                        <tr data-href="user/update/@item.Id" class="data-viewer">
                            <td class="text-nowrap">
                                @count
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Id)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.UserName)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.AvatarUrl)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Email)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.PhoneNumber)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.FirstName)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.LastName)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.DisplayName)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Birthday)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Nation)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Gender)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Address)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Dashboard)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Created)
                            </td>
                            <td class="text-nowrap">
                                @Html.DisplayFor(modelItem => item.Status)
                            </td>
                        </tr>
                    }
                }
            </tbody>
        </table> 
        @await Component.InvokeAsync("Pager", Model.ResultOject)

    </div>
    </div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const rows = document.querySelectorAll("tr[data-href]")
        rows.forEach((row) => {
            row.addEventListener("click", () => {
                window.location.href = row.dataset.href
            });
        });
    });
</script>










