@using Booking_Frontend.WebApp.Models.Owner;
@model NotifyBookingViewModel;

@{
    ViewData["Title"] = "Trang chi tiết";
    Layout = "_LayoutOwner";
}
@section IndexStyle {
    <link rel="stylesheet" href="~/style/stockman/index.css">
}
@inject Microsoft.Extensions.Configuration.IConfiguration Configuration;

<style>
    .add-picture {
        position: relative;
    }

    .add-picture::before {
        content: "Tải ảnh";
        position: absolute;
        background-color: white;
        padding: 0 5px;
        top: -15%;
        left: 5px;
    }
</style>
<div id="layoutSidenav_content">
    <div class="container mt-3">
        <div class="wrapper-thumbnail">
            <div class="row">
                <div class="col-md-3">
                    <div class="card-template" style="box-shadow:0 0 3px 1px #ccc; height: 280px; width: 200px;border: thin solid #ccc; border-radius: 10px; overflow: hidden">
                        <div class="card-img" style="width: 100%; height: 180px;">
                            <img src="@(Configuration["HostServer"] + Model.HotelViewModel.Thumbnail)" style="width: 200px; height: 200px; object-fit: cover" />
                            <div class="mt-2" style="width: 90%; height: 15px; background-color: #ccc"></div>
                            <div class="mt-2" style="width: 40%; height: 15px; background-color: #ccc"></div>
                            <div class="mt-2" style="width: 20%; margin-left:140px; height: 15px; background-color: #ccc"></div>
                        </div>
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card-location" style="width: 100%; border: thin solid #ccc; height: 200px; box-shadow: 0 0 3px 1px #ccc; border-radius: 15px">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="section-img" style="height: 200px; overflow: hidden">
                                    <img src="@(Configuration["HostServer"] + Model.HotelViewModel.Thumbnail)" style="width: 200px; object-fit: cover; height: 200px; border-top-left-radius: 15px; border-bottom-left-radius: 15px" />
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="mt-2" style="width: 90%; height: 15px; background-color: #ccc"></div>
                                <div class="mt-2" style="width: 50%; height: 15px; background-color: #ccc"></div>
                                <hr />
                                <div class="mt-2" style="width: 90%; height: 100px; background-color: #ccc"></div>

                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <form method="post" action="/store-picture/update-thumbnail" enctype="multipart/form-data">
                            <input name="Image" type="file" id="file-upload" accept="image/*" required>
                            <div class="mt-2">
                                <button type="submit" class="btn btn-primary">Tải ảnh lên</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <hr />
            <div class="row">
                @foreach (var item in Model.Images)
                {
                    <div class="col-md-2">
                        <div class="mb-3" style="width: 100%;position:relative ">
                            <img src="@(Configuration["HostServer"] + item.ImageUrl)" style="width: 100%; height: 150px" />
                            <div class=" btn-delete d-flex align-items-center justify-content-center" style="width:20px; height:20px; background-color: white; position:absolute; bottom:0;">
                                <a href="/delete-img/@item.Id" style="font-size: 20px; text-decoration:none; color: red">x</a>
                            </div>
                        </div>
                    </div>       
                }
            </div>
            <form method="post" action="/store-picture/update-image/@Model.HotelViewModel.Id" enctype="multipart/form-data">
                <div class="add-picture" style="width: 400px; height: 100px; border: thin solid #ccc; padding:20px">
                        <input type="file" name="Image"/>
                    <div class="mt-1"><button class="btn btn-primary">Tải ảnh</button></div>
                </div>    
             </form>
        </div>
    </div>
</div>
<script>
    const fileUpload = document.getElementById('file-upload');
    const fileLabel = document.getElementById('file-label');
    const fileName = document.getElementById('file-name');

    fileUpload.addEventListener('change', (event) => {
        const file = event.target.files[0];
        const fileNameText = `Selected file: ${file.name}`;
        fileName.textContent = fileNameText;
        fileLabel.innerHTML = `<span>${file.name}</span>`;
    });
</script>