@using Booking_Backend.Data.Enums;
@model DetailViewModel
@inject LazZiya.ExpressLocalization.ISharedCultureLocalizer _loc;
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@inject Microsoft.Extensions.Configuration.IConfiguration Configuration;
@{
    var culture = CultureInfo.CurrentCulture.Name;
}
@{
    ViewData["Title"] = "Trang chi tiết";
    Layout = "_Layout";
}
<style>
    .w3-progress-container {
        width: 100%;
        height: .5em;
        position: relative;
        background-color: #f1f1f1
    }

    .w3-progressbar {
        background-color: #003580;
        height: 100%;
        position: absolute;
        line-height: inherit
    }

    .w3-round-xlarge {
        border-radius: 16px !important
    }

    .feedback-customer:hover {
        transform: scale(1.1);
    }

    #feedback {
    }

    .bi-heart, .bi-heart-fill:hover {
        cursor: pointer;
    }
</style>

@section IndexStyle {
    <link rel="stylesheet" href="~/style/hotel/detail.css">
}
<div class="container " style="padding-top: 70px">
    <div class="row main-page">
        <div class="col-md-3 main-page-content left-bar">
            <div class="searchbox-layout-vertical pl-3 pr-3 pb-3 pt-0" style="height: 504px; border-color: white; background-color: #ffb700">
                <form method="get" action="@Url.Action("searchResult", "location")">
                    <h4 class="pb-0">Tìm theo</h4>
                    <div>
                        <div class="pl-2" style="font-weight:300; font-size: 11px">Địa điểm</div>
                        <input class="form-control" value="@ViewData["locationName"]" name="locationName" />
                    </div>
                    <div class="mt-1">
                        <div class="pl-2" style="font-weight:300; font-size: 11px">Ngày nhận phòng</div>
                        <input type="datetime" class="form-control" value="@ViewData["check-in"]" name="dateCheckIn" />
                    </div>
                    <div class="mt-1">
                        <div class="pl-2" style="font-weight:300; font-size: 11px">Ngày trả phòng</div>
                        <input type="datetime" value="@ViewData["check-out"]" class="form-control" name="dateCheckOut" />
                    </div>
                    <div class="mt-1">
                        <div class="pl-2" style="font-weight:300; font-size: 11px">Số người</div>
                        <input type="number" class="form-control" value="@Int16.Parse(ViewData["people"].ToString())" name="totalPeople" />
                    </div>
                    <button type="submit" class="btn btn-primary mt-2" style="width: 100%">Tìm ngay</button>
                    <div class="mt-3" style="height: 150px">
                        <div id="map" style="height: 100%; width: 100%"></div>
                        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCyYgiP09op4gI41iF5BDNUwyz0vPRPHSw&callback=initMap&v=weekly"
                                defer></script>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-9 main-page-content main-content">
            <div class="info-layout-full">
                <h4>@Model.HotelDetail.HotelTranslations.FirstOrDefault().Name</h4>
                <div class="info-title-hotel">
                    <a href=""><i class="bi bi-pin-map-fill"></i></a>
                    <p>@Model.HotelDetail.HotelTranslations.FirstOrDefault().Area - @Model.HotelDetail.HotelTranslations.FirstOrDefault().Address - </p>
                </div>
                <div class="list-img-hotel">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="row pb-2">
                                <div class="col-md-12 pr-2">
                                    @if (Model.HotelDetail.Images.Count >= 1)
                                    {
                                        <a href="@(Configuration["HostServer"] + Model.HotelDetail.Images[0].ImageUrl)" data-lightbox="listImageHotel">
                                            <img src="@(Configuration["HostServer"] + Model.HotelDetail.Images[0].ImageUrl)" alt="" class="img-1-1">
                                        </a>
                                    }
                                    else
                                    {
                                        <img src="" alt="" class="img-1-1">
                                    }
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 pr-2">
                                    @if (Model.HotelDetail.Images.Count >= 2)
                                    {
                                        <a href="@(Configuration["HostServer"] + Model.HotelDetail.Images[1].ImageUrl)" data-lightbox="listImageHotel">
                                            <img src="@(Configuration["HostServer"] + Model.HotelDetail.Images[1].ImageUrl)" alt="" class="img-1-2">
                                        </a>
                                    }
                                    else
                                    {
                                        <img src="" alt="" class="img-1-2">
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8 pl-0">
                            @if (Model.HotelDetail.Images.Count >= 3)
                            {
                                <a href="@(Configuration["HostServer"] + Model.HotelDetail.Images[2].ImageUrl)" data-lightbox="listImageHotel">
                                    @* <img src="@(Configuration["HostServer"] + Model.HotelDetail.Images[1].ImageUrl)" alt="" class="img-1-2"> *@
                                    <img src="@(Configuration["HostServer"] + Model.HotelDetail.Images[2].ImageUrl)" alt="" class="img-2">
                                </a>
                            }
                            else
                            {
                                <img src="" alt="" class="img-2">
                            }
                        </div>
                    </div>
                    <div class="row list-thimbnail">
                        @{
                            if (Model.HotelDetail.Images.Count >= 3)
                            {
                                int startIndex = 3; // Bắt đầu từ phần tử thứ 4
                                for (int i = startIndex; i < Model.HotelDetail.Images.Count; i++)
                                {
                                    <div class="col-md-2 card-img-3 pr-1 pl-1">
                                        @if (Model.HotelDetail.Images[i].ImageUrl != null)
                                        {
                                            <a href="@(Configuration["HostServer"] + Model.HotelDetail.Images[i].ImageUrl)" data-lightbox="listImageHotel">
                                                <img style="height: 100px" src="@(Configuration["HostServer"] + Model.HotelDetail.Images[i].ImageUrl)" alt="">
                                            </a>
                                        }
                                        else
                                        {
                                            <img style="height: 100px" src="" alt="">
                                        }
                                    </div>
                                }
                            }
                        }
                    </div>
                    <script>
                        lightbox.option({
                            'resizeDuration': 200,
                            'wrapAround': true,
                            'maxWidth': 800, // Giới hạn chiều rộng tối đa
                            'maxHeight': 600 // Giới hạn chiều cao tối đa
                        })
                    </script>
                </div>
            </div>
        </div>
    </div>
    <div class="row feature-extension">
        <div class="col-md-12">
            <div class="row pb-3">
                @foreach (var item in Model.ServiceHotels)
                {
                    <div class="col-md-2 extension-item pr-3 pl-0 mt-2">
                        <div>@item.Name</div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="row description-hotel">
        <div class="col-md-9">
            <div class="description-content">
                @Model.HotelDetail.HotelTranslations.FirstOrDefault().Description
            </div>
        </div>
        <div class="col-md-3">
            <form id="formAddToCart" action="/cart/addtocart" method="post">
                <div class="card-checksave">
                    <input type="hidden" value="@Model.HotelDetail.Id" name="HotelId" />
                    @if (Model.UserClient != null)
                    {
                        <input type="hidden" value="@Guid.Parse(Model.UserClient.ResultOject.Id)" name="UserId" />
                    }
                    <div class="pb">Bạn chưa có quyết định ?</div>
                    <div class="p-2" style="font-weight: 300; font-size: 13px">@Model.HotelDetail.HotelTranslations.FirstOrDefault().ShortDescription</div>
                    <div class="btn-savehotel">
                        <input id="addToCart" type="submit" value="Lưu chỗ nghỉ">
                    </div>
                </div>
            </form>
        </div>

    </div>
    <div class="row show-room">
        <h3>Phòng trống</h3>

        <div class="room-list pt-3">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th class="col-md-2">Loại chỗ nghỉ</th>
                        <th class="col-md-2">Tiện ích phòng</th>
                        <th class="col-md-1">SL khách</th>
                        <th class="col-md-2">Giá hôm nay</th>
                        <th class="col-md-1">Còn trống</th>
                        <th class="col-md-2"></th>
                    </tr>
                </thead>
                <tbody class="room-detail-body">
                    @foreach (var item in Model.Rooms)
                    {
                        <form method="post" asp-controller="Booking" asp-action="ConfirmInfo" asp-route-culture="@culture">
                        <tr>
                                @if (Model.HotelDetail.Images.Count >= 1)
                                {
                                <input type="hidden" value="@Model.HotelDetail.Images[0].ImageUrl" name="ThumbnailHotel" />
                                }
                                else
                                {
                                <input type="hidden" value="/" name="ThumbnailHotel" />
                                }
                            <input type="hidden" name="RoomId" value="@item.Id" />
                            <input type="hidden" name="HotelId" value="@Model.HotelDetail.Id" />
                            <td>
                                <input type="hidden" name="HotelName" value="@Model.HotelDetail.HotelTranslations.FirstOrDefault().Name" />
                                <input type="hidden" name="Address" value="@Model.HotelDetail.HotelTranslations.FirstOrDefault().Address" />
                                <input type="hidden" name="Hotline" value="@Model.HotelDetail.Hotline" />
                                <a href="">@item.RoomType.RoomTypeTranslations.FirstOrDefault().Name</a>
                                <input type="hidden" name="RoomTypeName" value="@item.RoomType.RoomTypeTranslations.FirstOrDefault().Name" />
                                <div style="font-size: 15px">@item.Bed.BedTranslations.FirstOrDefault().Name</div>
                                <input type="hidden" name="BedName" value="@item.Bed.BedTranslations.FirstOrDefault().Name" />
                                <br>
                                <span class="description-room-item">Mô tả loại giường: </span>
                                <p class="desroom-content">
                                        @item.Bed.BedTranslations.FirstOrDefault().Description
                                </p>
                            </td>
                            <td>
                                    @foreach (var extension in item.Room_Extensions)
                                    {
                                    <div style="font-weight: 300; font-size: 14px" class="extenname-item">
                                        - @if (extension.Extension.ExtensionTranslations.Count > 0)
                                            {
                                                <text>@extension.Extension.ExtensionTranslations.FirstOrDefault().Name</text>
                                            }
                                    </div>
                                    }
                            </td>
                            <td><i class="bi bi-person-fill"></i> x @item.Maximum</td>
                            <td style="font-size: 25px;">
                                <input type="hidden" name="Price" value="@item.PriceOverNight" />
                                    @item.PriceOverNight.ToString("N0") <span>VND</span>
                                <div class="VAT-room">Đã bao gồm thuế và phí</div>
                            </td>
                            <td class="d-flex justify-content-center" style="border: none; border-top: thin solid #ccc">
                                <div class=" d-flex align-items-center justify-content-center" style="font-size: 20px; border: thin solid #ccc; height:45px; width: 60px; background-color: #f7f3f3;">
                                        @(item.Status == StatusRoom.Empty ? 1 : 0)
                                </div>
                            </td>
                            <td class="column-result">
                                <select name="RoomQuality" class="form-control">
                                        @if (item.Status == StatusRoom.Empty)
                                        {
                                        <option value="0">0</option>
                                        <option value="1">1</option>
                                        }
                                        else
                                        {
                                        <option value="0">0</option>
                                        }
                                </select>
                                    @if (item.Status == StatusRoom.Empty)
                                    {
                                    <span style="color:blue; font-weight:300; font-size:15px">Chúng tôi còn 1 phòng trống</span>
                                    }
                                    else
                                    {
                                    <span style="color:red; font-weight:300; font-size:15px">Chúng tôi đã hết phòng trống</span>
                                    }
                                <h4 class="pt-3"><span class="total-price">0</span>VND </h4>
                                <p style="font-weight: 300; font-size: 14px">Đã bao gồm thuế</p>
                                    @if (item.Status == StatusRoom.Empty)
                                    {
                                    <input type="submit" value="Tôi sẽ đặt" style="width: 100%" class="btn btn-primary">
                                    }
                                    else
                                    {
                                    <input disabled type="submit" value="Đã bán hết" style="width: 100%" class="btn btn-outline-primary">
                                    }
                                <p class="pt-2" style="font-weight: 300; font-size: 14px">
                                    * Bạn sẽ được chuyển đến bước
                                    kế tiếp
                                </p>
                            </td>
                        </tr>
                        </form>
                    }
                </tbody>
            </table>
        </div>
    </div>
    <div class="mt-5 mb-5 feedbackcustomer">
        <h4>Đánh giá của khách hàng </h4>
        <div class="d-flex">
            <div class="score-wrapper" style="padding: 10px; background-color: #003580;color: white; border-top-left-radius: 10px; border-top-right-radius: 10px; border-bottom-left-radius: 10px">
                <div>
                    @Model.HotelDetail.Score
                </div>
            </div>
            <div style="" class="pl-2 d-flex align-items-center pl-3">
                <div style="color: red">
                    @{
                        var score = Math.Round(Model.HotelDetail.Score);
                        if (score <= 1)
                        {
                            <text>Chưa có đánh giá</text>
                        }
                        else if (score <= 2)
                        {
                            <text>Cực kì tệ</text>
                        }
                        else if (score <= 3)
                        {
                            <text>Rất tệ</text>
                        }
                        else if (score <= 4)
                        {
                            <text>Tệ</text>
                        }
                        else if (score <= 5)
                        {
                            <text>Trung bình</text>
                        }
                        else if (score <= 6)
                        {
                            <text>Tạm được</text>
                        }
                        else if (score <= 7)
                        {
                            <text>Tốt</text>
                        }
                        else if (score <= 8)
                        {
                            <text>Tuyệt vời</text>
                        }
                        else if (score <= 9)
                        {
                            <text>Tuyệt hảo</text>
                        }
                        else if (score <= 10)
                        {
                            <text>Thiên đàng</text>
                        }
                    }
                </div>
                <i class="bi bi-circle-fill" style="font-size: 8px; padding: 0 10px"></i>
                <div>@(Model.HotelDetail.CountFeedback) đánh giá</div>
                @if (Model.UserClient != null)
                {
                    <div id="btn-showFeedback" style="color: blue; cursor:pointer" class="ml-3 feedback-customer">
                        <i class="bi bi-chevron-compact-down"></i>
                        Đánh giá
                    </div>
                    <div id="btn-hiddenFeedback" style="color: blue; cursor:pointer; display: none" class="ml-3 feedback-customer">
                        <i class="bi bi-chevron-compact-up"></i>
                        Đánh giá
                    </div>
                }
            </div>
        </div>
        <div class="row">
            <div class="col-md-4 mt-2">
                <div class="d-flex justify-content-between">
                    <div style="font-size: 13px; font-weight: 300">Nhân viên phục vụ</div>
                    <div style="font-size: 13px; font-weight: 300">@(Math.Round(Model.HotelDetail.StaffScore))</div>
                </div>
                <div class="w3-progress-container w3-round-xlarge">
                    <div class="w3-progressbar w3-round-xlarge" style="width:@(Math.Round(Model.HotelDetail.StaffScore)*10)%"></div>
                </div>
            </div>
            <div class="col-md-4 mt-2">
                <div class="d-flex justify-content-between">
                    <div style="font-size: 13px; font-weight: 300">Trang bị tiện ích</div>
                    <div style="font-size: 13px; font-weight: 300">@(Math.Round(Model.HotelDetail.FacilitiesScore))</div>
                </div>
                <div class="w3-progress-container w3-round-xlarge">
                    <div class="w3-progressbar w3-round-xlarge" style="width:@(Math.Round(Model.HotelDetail.FacilitiesScore)*10)%"></div>
                </div>
            </div>
            <div class="col-md-4 mt-2">
                <div class="d-flex justify-content-between">
                    <div style="font-size: 13px; font-weight: 300">Sạch sẽ</div>
                    <div style="font-size: 13px; font-weight: 300">@(Math.Round(Model.HotelDetail.CleanlinessScores))</div>
                </div>
                <div class="w3-progress-container w3-round-xlarge">
                    <div class="w3-progressbar w3-round-xlarge" style="width:@(Math.Round(Model.HotelDetail.CleanlinessScores)*10)%"></div>
                </div>
            </div>
            <div class="col-md-4 mt-4">
                <div class="d-flex justify-content-between">
                    <div style="font-size: 13px; font-weight: 300">Thoải mái</div>
                    <div style="font-size: 13px; font-weight: 300">@(Math.Round(Model.HotelDetail.ComfortScore))</div>
                </div>
                <div class="w3-progress-container w3-round-xlarge">
                    <div class="w3-progressbar w3-round-xlarge" style="width:@(Math.Round(Model.HotelDetail.ComfortScore)*10)%"></div>
                </div>
            </div>
            <div class="col-md-4 mt-4">
                <div class="d-flex justify-content-between">
                    <div style="font-size: 13px; font-weight: 300">Đáng tiền</div>
                    <div style="font-size: 13px; font-weight: 300">@(Math.Round(Model.HotelDetail.ValueScore))</div>
                </div>
                <div class="w3-progress-container w3-round-xlarge">
                    <div class="w3-progressbar w3-round-xlarge" style="width:@(Math.Round(Model.HotelDetail.ValueScore)*10)%"></div>
                </div>
            </div>
            <div class="col-md-4 mt-4">
                <div class="d-flex justify-content-between">
                    <div style="font-size: 13px; font-weight: 300">Vị trí</div>
                    <div style="font-size: 13px; font-weight: 300">@(Math.Round(Model.HotelDetail.LocationScore))</div>
                </div>
                <div class="w3-progress-container w3-round-xlarge">
                    <div class="w3-progressbar w3-round-xlarge" style="width:@(Math.Round(Model.HotelDetail.LocationScore)*10)%"></div>
                </div>
            </div>
        </div>
        <div id="feedback" style="width: 100%; display: none; padding: 10px" class="mt-3">
            <h5>Hãy cho chúng tôi biết bạn nghĩ gì?</h5>
            <form action="/rating/me" method="post">
                <input type="hidden" value="@Model.HotelDetail.Id" name="HotelId" />
                <div class="row">
                    <div class="col-md-6">
                        <table class="table table-border">
                            <tr>
                                <td>
                                    <div class="" style="color: black; font-weight: 300; padding-right:25px">Nhân viên phục vụ: </div>
                                </td>
                                <td>
                                    <input id="StaffScore" type="number" name="StaffScore" hidden />
                                    <div style="color: #f5e501">
                                        <i title="Kinh khủng tệ" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Cực kì tệ" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Rất tệ" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Tệ" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Trung bình" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Tạm được" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Tốt" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Tuyệt vời" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Tuyệt hảo" class="bi bi-star star-item1 pr-2"></i>
                                        <i title="Thiên đàng" class="bi bi-star star-item1 pr-2"></i>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="" style="color: black; font-weight: 300; padding-right:25px">Tiện ích dịch vụ: </div>
                                </td>
                                <td>
                                    <input id="FacilitiesScore" type="number" name="FacilitiesScore" hidden />
                                    <div style="color: #f5e501">
                                        <i title="Kinh khủng tệ" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Cực kì tệ" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Rất tệ" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Tệ" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Trung bình" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Tạm được" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Tốt" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Tuyệt vời" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Tuyệt hảo" class="bi bi-star star-item2 pr-2"></i>
                                        <i title="Thiên đàng" class="bi bi-star star-item2 pr-2"></i>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="pr-2" style="color: black; font-weight: 300">Sạch sẽ thoáng mát: </div>
                                </td>
                                <td>
                                    <input id="CleanlinessScores" type="number" name="CleanlinessScores" hidden />
                                    <div style="color: #f5e501">
                                        <i title="Kinh khủng tệ" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Cực kì tệ" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Rất tệ" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Tệ" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Trung bình" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Tạm được" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Tốt" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Tuyệt vời" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Tuyệt hảo" class="bi bi-star star-item3 pr-2"></i>
                                        <i title="Thiên đàng" class="bi bi-star star-item3 pr-2"></i>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="pr-2" style="color: black; font-weight: 300">Không gian thoải mái: </div>
                                </td>
                                <td>
                                    <input id="ComfortScore" type="number" name="ComfortScore" hidden />
                                    <div style="color: #f5e501">
                                        <i title="Kinh khủng tệ" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Cực kì tệ" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Rất tệ" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Tệ" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Trung bình" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Tạm được" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Tốt" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Tuyệt vời" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Tuyệt hảo" class="bi bi-star star-item4 pr-2"></i>
                                        <i title="Thiên đàng" class="bi bi-star star-item4 pr-2"></i>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="pr-2" style="color: black; font-weight: 300">Vật chất hiện đại: </div>
                                </td>
                                <td>
                                    <input id="ValueScore" type="number" name="ValueScore" hidden />
                                    <div style="color: #f5e501">
                                        <i title="Kinh khủng tệ" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Cực kì tệ" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Rất tệ" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Tệ" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Trung bình" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Tạm được" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Tốt" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Tuyệt vời" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Tuyệt hảo" class="bi bi-star star-item5 pr-2"></i>
                                        <i title="Thiên đàng" class="bi bi-star star-item5 pr-2"></i>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="pr-2" style="color: black; font-weight: 300">Vị trí thuận tiện: </div>
                                </td>
                                <td>
                                    <input id="LocationScore" type="number" name="LocationScore" hidden />
                                    <div style="color: #f5e501">
                                        <i title="Kinh khủng tệ" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Cực kì tệ" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Rất tệ" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Tệ" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Trung bình" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Tạm được" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Tốt" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Tuyệt vời" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Tuyệt hảo" class="bi bi-star star-item6 pr-2"></i>
                                        <i title="Thiên đàng" class="bi bi-star star-item6 pr-2"></i>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="d-flex">
                    <button class="btn btn-primary" style="font-weight: 300" type="submit">Đánh giá</button>
                    <div class="d-flex align-items-center" style="padding: 0 15px"><a style="color: blue;cursor: pointer ;text-decoration: none" id="cancelFeedback">Hủy</a></div>
                </div>
            </form>
        </div>
    </div>
    <div class="mt-5 comment-container" style="border: thin solid #ccc">
        @if (Model.UserClient != null)
        {
            <form method="post" asp-action="create" asp-controller="comment">
                <div class="row p-3">
                    <div class="col-md-1">
                        <div class="wrapper-avatar justify-content-center d-flex">
                            @if (Model.UserClient.ResultOject.AvatarUrl != "")
                            {
                                <img src="@(Configuration["HostServer"] + Model.UserClient.ResultOject.AvatarUrl)" style="height: 60px; width:60px" />

                            }
                            else
                            {
                                <img src="/img/user-profile-icon-trendy-flat-260nw-1923506948.png" style="height: 60px; width:60px" />

                            }
                        </div>
                    </div>
                    <div class="col-md-7">
                        <input type="hidden" name="UserId" value="@Model.UserClient.ResultOject.Id" />
                        <input type="hidden" name="HotelId" value="@Model.HotelDetail.Id" />
                        <div class="wrapper-content-comment">
                            <textarea name="Content" class="content-comment p-2" style="width: 100%;outline: none; border: thin solid #ccc"></textarea>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <button type="submit" class="btn btn-primary">Bình luận</button>
                    </div>
                </div>
            </form>
        }
        else
        {
            <form method="post">
                <div class="row p-3">
                    <div class="col-md-1">
                        <div class="wrapper-avatar justify-content-center d-flex">
                            <img src="/img/logo/avatar-trang-4.jpg" style="height: 60px; width:60px" />
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div class="wrapper-content-comment">
                            <x readonly class="content-comment p-2" style="width: 100%;outline: none">
                                Hãy đăng nhập để có thể bình luận!
                            </x>
                        </div>
                    </div>
                </div>
            </form>
        }
        @foreach (var item in Model.GetAllCommentByHotelId)
        {
            <hr class="m-0" />
            <div class="comment-item p-3">
                <div class="row">
                    <div class="col-md-1">
                        <img class="ml-4" src="@(Configuration["HostServer"] + item.User.UserImages.FirstOrDefault().ImageUrl)" style="height: 40px; width: 40px; border-radius: 50%" />
                    </div>
                    <div class="col-md-8">
                        <form action="/info/hotel" method="post" id="form_@item.Id">
                            <input type="hidden" value="@Model.HotelDetail.Id" name="HotelId" />
                            <input type="hidden" value="@item.Id" name="CommentId" />

                            <div class="username-comment" style="color: blue">@item.User.DisplayName - <span style="color:black; font-weight: 300; font-size: 13px">@item.Created</span></div>
                            <div>
                                <input readonly id="txtCommentContent_@(item.Id)" name="Content" class="content-comment form-control" style="background-color: white; border: none; font-size: 13px; font-weight: 300" value="@item.Content" />
                            </div>
                            <div class="d-flex">
                                @if (Model.UserClient != null)
                                {
                                    if (Model.CommentLike.Where(x => x.Comment_Id == item.Id).Select(x => x.User_Id).FirstOrDefault() == Guid.Parse(Model.UserClient.ResultOject.Id))
                                    {
                                        <div data-like=@item.Id id="btnLike_@(item.Id)" class="btnLike mt-2" style="font-size: 13px; color: red"><i class="bi bi-heart-fill"></i></div>
                                        <div data-like=@item.Id id="btnUnLike_@(item.Id)" class="btnUnLike mt-2" style="font-size: 13px; color: red; display: none"><i class="bi bi-heart"></i></div>
                                        <div class="d-flex align-items-end pl-1" style="color: red; font-size: 13px">@item.CountComment</div>
                                    }
                                    else
                                    {
                                        <div data-like=@item.Id id="btnLike_@(item.Id)" class="btnLike mt-2" style="font-size: 13px; display: none; color: red"><i class="bi bi-heart-fill"></i></div>
                                        <div data-like=@item.Id id="btnUnLike_@(item.Id)" class="btnUnLike mt-2" style="font-size: 13px; color: red"><i class="bi bi-heart"></i></div>
                                        <div class="d-flex align-items-end pl-1" style="color: red; font-size: 13px">@item.CountComment</div>
                                    }
                                }
                                else
                                {
                                    <div title="Hãy đăng nhập để yêu thích" class=" mt-2" style="font-size: 13px; color: red"><i class="bi bi-heart"></i></div>
                                    <div class="d-flex align-items-end pl-1" style="color: red; font-size: 13px">@item.CountComment</div>
                                }
                            </div>
                        </form>

                        <form method="post" action="/comment/update/@item.Id">
                            <input type="hidden" name="HotelId" value="@Model.HotelDetail.Id" />
                            @if (Model.UserClient != null && Model.UserClient.ResultOject.Id == item.User.Id.ToString())
                            {
                                <button id="btnUpdate" data-comment-id="@(item.Id)" class="btn btn-outline-primary mt-2" style="font-size: 13px;"><i class="bi bi-pencil-square"></i></button>
                                <button id="btnConfirm" type="submit" class="btn btn-primary mt-2" style="display: none; font-size: 13px;"><i class="bi bi-check-lg"></i></button>
                                <a href="/comment/delete/@item.Id/@Model.HotelDetail.Id"><div id="btnDelete" class="btn btn-danger mt-2" style="font-size: 13px;"><i class="bi bi-trash3"></i></div></a>
                                <button id="btnCancel" class="btn btn-danger mt-2" style="font-size: 13px; display: none"><i class="bi bi-x-circle"></i></button>
                            }
                        </form>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
<script>
    var btnLikes = document.querySelectorAll(".btnLike");
    var btnUnLikes = document.querySelectorAll(".btnUnLike")
    btnLikes.forEach(function (btnLike) {
        btnLike.addEventListener("click", function () {
            event.preventDefault()

            var commentId = this.getAttribute("data-like");

            var btnUnLike = document.getElementById("btnUnLike_" + commentId);
            var btnLike = document.getElementById("btnLike_" + commentId);

            btnLike.style.display = "none";
            btnUnLike.style.display = "inline-block";
            var form = document.getElementById("form_" + commentId)
            form.submit()
            // Thực hiện các hành động khác khi người dùng thả tim
        });
    });

    btnUnLikes.forEach(function (btnUnLike) {
        btnUnLike.addEventListener("click", function () {
            var commentId = this.getAttribute("data-like");
            var btnUnLike = document.getElementById("btnUnLike_" + commentId);
            var btnLike = document.getElementById("btnLike_" + commentId);

            btnLike.style.display = "block";
            btnUnLike.style.display = "none";
            var form = document.getElementById("form_" + commentId)
            form.submit()

            // Thực hiện các hành động khác khi người dùng không thả tim
        });
    });
    var stars1 = document.querySelectorAll('.star-item1');
    var staffScore = document.getElementById('StaffScore');
    stars1.forEach(function (star, idx) {
        star.addEventListener('click', function () {
            staffScore.value = idx + 1;
            stars1.forEach(i => {
                i.classList.replace("bi-star-fill", "bi-star")
            })
            for (let i = 0; i < stars1.length; i++) {
                if (i <= idx) {
                    stars1[i].classList.replace("bi-star", "bi-star-fill")
                }
            }
        });
    })
    var stars2 = document.querySelectorAll('.star-item2');
    var facilitiesScore = document.getElementById('FacilitiesScore');
    stars2.forEach(function (star, idx) {
        star.addEventListener('click', function () {
            facilitiesScore.value = idx + 1;
            stars2.forEach(i => {
                i.classList.replace("bi-star-fill", "bi-star")
            })
            for (let i = 0; i < stars2.length; i++) {
                if (i <= idx) {
                    stars2[i].classList.replace("bi-star", "bi-star-fill")
                }
            }
        });
    })
    var stars3 = document.querySelectorAll('.star-item3');
    var cleanlinessScores = document.getElementById('CleanlinessScores');
    stars3.forEach(function (star, idx) {
        star.addEventListener('click', function () {
            cleanlinessScores.value = idx + 1;
            stars3.forEach(i => {
                i.classList.replace("bi-star-fill", "bi-star")
            })
            for (let i = 0; i < stars3.length; i++) {
                if (i <= idx) {
                    stars3[i].classList.replace("bi-star", "bi-star-fill")
                }
            }
        });
    })
    var stars4 = document.querySelectorAll('.star-item4');
    var comfortScore = document.getElementById('ComfortScore');
    stars4.forEach(function (star, idx) {
        star.addEventListener('click', function () {
            comfortScore.value = idx + 1;
            stars4.forEach(i => {
                i.classList.replace("bi-star-fill", "bi-star")
            })
            for (let i = 0; i < stars4.length; i++) {
                if (i <= idx) {
                    stars4[i].classList.replace("bi-star", "bi-star-fill")
                }
            }
        });
    })
    var stars5 = document.querySelectorAll('.star-item5');
    var valueScore = document.getElementById('ValueScore');
    stars5.forEach(function (star, idx) {
        star.addEventListener('click', function () {
            valueScore.value = idx + 1;
            stars5.forEach(i => {
                i.classList.replace("bi-star-fill", "bi-star")
            })
            for (let i = 0; i < stars5.length; i++) {
                if (i <= idx) {
                    stars5[i].classList.replace("bi-star", "bi-star-fill")
                }
            }
        });
    })
    var stars6 = document.querySelectorAll('.star-item6');
    var locationScore = document.getElementById('LocationScore');
    stars6.forEach(function (star, idx) {
        star.addEventListener('click', function () {
            locationScore.value = idx + 1;
            stars6.forEach(i => {
                i.classList.replace("bi-star-fill", "bi-star")
            })
            for (let i = 0; i < stars6.length; i++) {
                if (i <= idx) {
                    stars6[i].classList.replace("bi-star", "bi-star-fill")
                }
            }
        });
    })
    var btnCancelFeedback = document.getElementById("cancelFeedback")
    var btnShowFeedback = document.getElementById("btn-showFeedback")
    var btnHiddenFeedback = document.getElementById("btn-hiddenFeedback")
    var feedback = document.getElementById("feedback")
    btnShowFeedback.addEventListener("click", function () {
        console.log("kro")
        feedback.style.display = "block"
        btnHiddenFeedback.style.display = "block"
        btnShowFeedback.style.display = "none"
    })
    btnHiddenFeedback.addEventListener("click", function () {
        feedback.style.display = "none"
        btnHiddenFeedback.style.display = "none"
        btnShowFeedback.style.display = "block"
    })
    btnCancelFeedback.addEventListener("click", function () {
        feedback.style.display = "none"
        btnHiddenFeedback.style.display = "none"
        btnShowFeedback.style.display = "block"
    })


    function initMap() {
        const uluru = {
            lat: @Html.Raw(Json.Serialize(Model.HotelDetail.Latitude)), lng: @Html.Raw(Json.Serialize(Model.HotelDetail.Longitude)) };
        const map = new google.maps.Map(document.getElementById("map"), {
            zoom: 15,
            center: uluru,
        });
        // Thêm sự kiện 'click' vào bản đồ
        map.addListener("click", (event) => {
            // Lấy tọa độ khi click
            const clickedLocation = event.latLng;
            // Lấy vĩ độ và kinh độ
            const latitude = clickedLocation.lat();
            const longitude = clickedLocation.lng();
            // In ra console
            console.log("Vĩ độ:", latitude);
            console.log("Kinh độ:", longitude);
        });
        const contentString = '@Model.HotelDetail.HotelTranslations.FirstOrDefault().Address'
        const infowindow = new google.maps.InfoWindow({
            content: contentString,
            ariaLabel: "Uluru",
        });
        const marker = new google.maps.Marker({
            position: uluru,
            map,
            title: "Uluru (Ayers Rock)",
        });

        marker.addListener("click", () => {
            infowindow.open({
                anchor: marker,
                map,
            });
        });
    }

    window.initMap = initMap;


    var addToCart = document.getElementById("addToCart");
    var formAddToCart = document.getElementById("formAddToCart");
    addToCart.addEventListener("click", (e) => {
        e.preventDefault()
        Swal.fire({
            title: "Xác nhận thêm vào giỏ hàng!",
            text: "Lưu trữ giỏ hàng để đặt sau",
            icon: "info",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Có, tôi đồng ý"
        }).then((result) => {
            if (result.isConfirmed) {
                formAddToCart.submit()
            }
        });
    })
    var
        btnUpdate = document.getElementById("btnUpdate");
    var btnDelete = document.getElementById("btnDelete");
    var btnCancel = document.getElementById("btnCancel");
    var btnConfirm = document.getElementById("btnConfirm");


    btnUpdate.addEventListener("click", function () {
        event.preventDefault()
        var commentId = this.getAttribute("data-comment-id");
        var txtCommentContent = document.getElementById("txtCommentContent_" + commentId);
        txtCommentContent.removeAttribute("readonly");
        txtCommentContent.focus()
        btnDelete.style.display = "none"
        btnUpdate.style.display = "none"
        btnCancel.style.display = "inline-block"
        btnConfirm.style.display = "inline-block"
    });
    btnCancel.addEventListener("click", function () {
        event.preventDefault()

        var commentId = this.getAttribute("data-comment-id");
        var txtCommentContent = document.getElementById("txtCommentContent_" + commentId);
        btnCancel.style.display = "none"
        btnDelete.style.display = "inline-block"
        btnConfirm.style.display = "none"
        btnUpdate.style.display = "inline-block"
    });




</script>